{% extends "dialog.html" %}
{% load i18n %}

{% block extra-page-id %}
	id="create-proposal"
{% endblock %}

{% block page_header %}
    {% if form.instance.id %}
        {% trans "Edit Proposal" %}
    {% else %}
        {% trans "New Proposal" %}
    {% endif %}
{% endblock %}

{% block header-end %}
{% endblock %}

{% block content %}

    {{ form }}

<script>
	function refreshProposalForm() {

		// prevent html5 required field
		$('#id_proposal-type').val() == '';

		// hide task related fields
		var els = $('#id_proposal-assigned_to').parent().parent();
		var els1 = $('#id_proposal-due_by').parent().parent();
		if ($('#id_proposal-type').val() == '1') {
			els.show();
			els1.show();
		} else {
			els.hide();
			els1.hide();
		}

	}

	function refreshProposalEditForm() {

		// prevent html5 required field
		$('#id_type').val() == '';

		// hide task related fields
		var els = $('#div_id_assigned_to,#div_id_due_by');
		if ($('#id_type').val() == '1') {
			els.show();
		} else {
			els.hide();
		}

	}
	refreshProposalEditForm();
	refreshProposalForm();
	$(function() {
		$('body').on('change', '#id_proposal-type', refreshProposalForm);
	}); 
	$(function() {
		$('body').on('change', '#id_type', refreshProposalEditForm);
	}); 
</script>

{% endblock %}
